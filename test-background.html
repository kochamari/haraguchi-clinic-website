<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhoneèƒŒæ™¯ãƒ†ã‚¹ãƒˆ - åŸå£æ¶ˆåŒ–å™¨å†…ç§‘</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            min-height: 100vh;
            background-color: #e3f2fd;
        }
        
        @media (max-width: 768px) {
            html body {
                background-color: #e3f2fd !important;
                background-image: 
                    linear-gradient(45deg, rgba(173, 216, 230, 0.8) 25%, transparent 25%),
                    linear-gradient(-45deg, rgba(127, 179, 213, 0.7) 25%, transparent 25%),
                    linear-gradient(45deg, transparent 75%, rgba(99, 187, 208, 0.75) 75%),
                    linear-gradient(-45deg, transparent 75%, rgba(135, 206, 235, 0.65) 75%) !important;
                background-size: 20px 20px !important;
                background-position: 0 0, 0 10px, 10px -10px, -10px 0px !important;
                min-height: 100vh !important;
            }
        }
        
        .test-container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            margin-top: 50px;
        }
        
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
            background: rgba(33, 150, 243, 0.1);
        }
        
        .success { border-left-color: #4caf50; background: rgba(76, 175, 80, 0.1); }
        .error { border-left-color: #f44336; background: rgba(244, 67, 54, 0.1); }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>iPhoneèƒŒæ™¯è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã§iPhoneèƒŒæ™¯ã®åŸå› ç©¶æ˜ã‚’è¡Œã„ã¾ã™ã€‚</p>
        
        <div id="device-info" class="test-result">
            <strong>ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºä¸­...</strong>
        </div>
        
        <div id="background-info" class="test-result">
            <strong>èƒŒæ™¯æƒ…å ±å–å¾—ä¸­...</strong>
        </div>
        
        <div id="css-info" class="test-result">
            <strong>CSSæƒ…å ±ç¢ºèªä¸­...</strong>
        </div>
        
        <div id="force-result" class="test-result">
            <strong>å¼·åˆ¶é©ç”¨çµæœ...</strong>
        </div>
        
        <a href="index.html" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background: #2196f3; color: white; text-decoration: none; border-radius: 5px;">ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
    </div>

    <script>
        const deviceInfo = document.getElementById('device-info');
        const backgroundInfo = document.getElementById('background-info');
        const cssInfo = document.getElementById('css-info');
        const forceResult = document.getElementById('force-result');
        
        // ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        const isMobile = window.innerWidth <= 768;
        
        deviceInfo.innerHTML = `
            <strong>ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:</strong><br>
            iOS: ${isIOS ? 'âœ…' : 'âŒ'}<br>
            Safari: ${isSafari ? 'âœ…' : 'âŒ'}<br>
            ãƒ¢ãƒã‚¤ãƒ«å¹…: ${isMobile ? 'âœ…' : 'âŒ'}<br>
            ç”»é¢å¹…: ${window.innerWidth}px<br>
            User Agent: ${navigator.userAgent}
        `;
        deviceInfo.className = `test-result ${isIOS ? 'success' : ''}`;
        
        // èƒŒæ™¯æƒ…å ±å–å¾—
        const body = document.body;
        const computedStyle = window.getComputedStyle(body);
        
        backgroundInfo.innerHTML = `
            <strong>ç¾åœ¨ã®èƒŒæ™¯:</strong><br>
            Background Color: ${computedStyle.backgroundColor}<br>
            Background Image: ${computedStyle.backgroundImage}<br>
            Background Size: ${computedStyle.backgroundSize}<br>
            Background Position: ${computedStyle.backgroundPosition}
        `;
        
        // CSSé©ç”¨ç¢ºèª
        cssInfo.innerHTML = `
            <strong>CSSçŠ¶æ…‹:</strong><br>
            ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªé©ç”¨: ${window.matchMedia('(max-width: 768px)').matches ? 'âœ…' : 'âŒ'}<br>
            ViewPortå¹…: ${window.innerWidth}px<br>
            ViewPorté«˜ã•: ${window.innerHeight}px
        `;
        
        // å¼·åˆ¶é©ç”¨ãƒ†ã‚¹ãƒˆï¼ˆiOS/ãƒ¢ãƒã‚¤ãƒ«ã®å ´åˆã®ã¿ï¼‰
        if (isIOS || isMobile) {
            setTimeout(() => {
                console.log('ğŸ” å¼·åˆ¶èƒŒæ™¯é©ç”¨ãƒ†ã‚¹ãƒˆé–‹å§‹');
                
                body.style.setProperty('background-color', '#bbdefb', 'important');
                body.style.setProperty('background-image', `
                    linear-gradient(45deg, rgba(173, 216, 230, 0.9) 25%, transparent 25%),
                    linear-gradient(-45deg, rgba(127, 179, 213, 0.8) 25%, transparent 25%),
                    linear-gradient(45deg, transparent 75%, rgba(99, 187, 208, 0.85) 75%),
                    linear-gradient(-45deg, transparent 75%, rgba(135, 206, 235, 0.75) 75%)
                `, 'important');
                body.style.setProperty('background-size', '15px 15px', 'important');
                body.style.setProperty('background-position', '0 0, 0 7px, 7px -7px, -7px 0px', 'important');
                
                setTimeout(() => {
                    const newStyle = window.getComputedStyle(body);
                    const hasPattern = newStyle.backgroundImage !== 'none' && newStyle.backgroundImage !== '';
                    
                    forceResult.innerHTML = `
                        <strong>å¼·åˆ¶é©ç”¨çµæœ:</strong><br>
                        èƒŒæ™¯ãƒ‘ã‚¿ãƒ¼ãƒ³è¡¨ç¤º: ${hasPattern ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}<br>
                        æ–°ã—ã„èƒŒæ™¯è‰²: ${newStyle.backgroundColor}<br>
                        æ–°ã—ã„èƒŒæ™¯ç”»åƒ: ${newStyle.backgroundImage.substring(0, 100)}...
                    `;
                    forceResult.className = `test-result ${hasPattern ? 'success' : 'error'}`;
                    
                    console.log('âœ… ãƒ†ã‚¹ãƒˆå®Œäº†:', hasPattern ? 'æˆåŠŸ' : 'å¤±æ•—');
                }, 500);
            }, 1000);
        } else {
            forceResult.innerHTML = '<strong>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®ãŸã‚å¼·åˆ¶é©ç”¨ãƒ†ã‚¹ãƒˆã¯ã‚¹ã‚­ãƒƒãƒ—</strong>';
        }
    </script>
</body>
</html>